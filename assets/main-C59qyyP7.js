import{c as u,g as p}from"./helpers-Bvq9V0xt.js";const d={CHAT_LIST:document.querySelector(".chat-list"),CREATE_NEW_CHAT_BTN:document.querySelector(".create-chat-btn")};function m(e){const t=document.createElement("a"),a=document.createElement("div"),s=document.createElement("img"),c=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");if(a.classList.add("user-chat"),s.classList.add("user-chat__img"),c.classList.add("user-chat__info"),o.classList.add("user-chat__info_upper"),n.classList.add("user-chat__info_bottom"),r.classList.add("user-chat__info_upper_title"),l.classList.add("user-chat__info_upper_last-message-status"),t.classList.add("link-wrapper-chat"),t.href=`chat.html?user=${e.id}`,r.textContent=`${e.name}`,e.messages.length>0){const i=e.messages[e.messages.length-1];n.textContent=`${i.text}`,l.textContent=`${u(i.date)}`}else n.textContent="Пока сообщений в чате нет";s.src=e.avatarUrl,s.alt=`${e.name} аватар`,a.append(s,c),c.append(o,n),o.append(r,l),t.appendChild(a),d.CHAT_LIST.appendChild(t)}function h(e){const t=p(),a=JSON.parse(localStorage.getItem("users"))||[],s={id:t,name:e,avatarUrl:`https://api.dicebear.com/9.x/lorelei/svg?seed=${e+t}`,messages:[]};a.push(s),localStorage.setItem("users",JSON.stringify(a)),m(s)}d.CREATE_NEW_CHAT_BTN.addEventListener("click",e=>{e.preventDefault();const t=prompt("Введите имя собеседника:");t.trim()&&h(t)});function _(){(JSON.parse(localStorage.getItem("users"))||[]).forEach(m)}_();
