import{g as m,c as u}from"./helpers-C76g-LQL.js";const d={CHAT_LIST:document.querySelector(".chat-list"),CREATE_NEW_CHAT_BTN:document.querySelector(".create-chat-btn")};function p(e){const t=m(),s=JSON.parse(localStorage.getItem("users"))||[],a={id:t,name:e,avatarUrl:`https://api.dicebear.com/9.x/lorelei/svg?seed=${e+t}`,messages:[]};s.push(a),localStorage.setItem("users",JSON.stringify(s)),window.location.href=`chat.html?user=${t}`}d.CREATE_NEW_CHAT_BTN.addEventListener("click",e=>{e.preventDefault();const t=prompt("Введите имя собеседника:");t.trim()&&p(t)});function h(e){const t=document.createElement("a"),s=document.createElement("div"),a=document.createElement("img"),c=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");if(s.classList.add("user-chat"),a.classList.add("user-chat__img"),c.classList.add("user-chat__info"),o.classList.add("user-chat__info_upper"),n.classList.add("user-chat__info_bottom"),r.classList.add("user-chat__info_upper_title"),l.classList.add("user-chat__info_upper_last-message-status"),t.classList.add("link-wrapper-chat"),t.href=`chat.html?user=${e.id}`,r.textContent=`${e.name}`,e.messages.length>0){const i=e.messages[e.messages.length-1];n.textContent=`${i.text}`,l.textContent=`${u(i.date)}`}else n.textContent="Пока сообщений в чате нет";a.src=e.avatarUrl,a.alt=`${e.name} аватар`,s.append(a,c),c.append(o,n),o.append(r,l),t.appendChild(s),d.CHAT_LIST.appendChild(t)}function _(){(JSON.parse(localStorage.getItem("users"))||[]).forEach(h)}_();
